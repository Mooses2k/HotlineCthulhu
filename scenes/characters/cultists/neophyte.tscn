[gd_scene load_steps=17 format=2]

[ext_resource path="res://scenes/characters/character.tscn" type="PackedScene" id=1]
[ext_resource path="res://core/ai/check_nodes/bt_gun_cooldown.gd" type="Script" id=2]
[ext_resource path="res://core/ai/action_nodes/bt_shoot.gd" type="Script" id=3]
[ext_resource path="res://scenes/characters/body.gd" type="Script" id=4]
[ext_resource path="res://scenes/sensors/direct_player_sight/direct_player_sight.tscn" type="PackedScene" id=5]
[ext_resource path="res://core/ai/behavior_tree.gd" type="Script" id=6]
[ext_resource path="res://core/ai/action_nodes/bt_select_random_target.gd" type="Script" id=7]
[ext_resource path="res://core/ai/flow_nodes/bt_selector.gd" type="Script" id=8]
[ext_resource path="res://core/ai/flow_nodes/bt_sequence.gd" type="Script" id=9]
[ext_resource path="res://core/ai/action_nodes/bt_wait_random.gd" type="Script" id=10]
[ext_resource path="res://core/ai/check_nodes/bt_player_sensor.gd" type="Script" id=11]
[ext_resource path="res://core/ai/action_nodes/bt_go_to_target.gd" type="Script" id=12]
[ext_resource path="res://core/ai/check_nodes/bt_approach_distance.gd" type="Script" id=13]
[ext_resource path="res://core/ai/action_nodes/bt_look_at_target.gd" type="Script" id=14]
[ext_resource path="res://resources/models/characters/cultists/cultist_neophyte/CultistNeophyteNoCape.glb" type="PackedScene" id=15]

[sub_resource type="SphereShape" id=4]
radius = 3.5

[node name="Cultist" instance=ExtResource( 1 )]
max_health = 50
move_speed = 3.0
acceleration = 6.0
mass = 8.0
_legcast = NodePath("Legs/Feet")

[node name="CollisionShape" parent="." index="0"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0.9, -0.04 )

[node name="Body" parent="." index="4"]
script = ExtResource( 4 )

[node name="DirectPlayerSight" parent="Body" index="2" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6969, 0 )
character = NodePath("../..")
FOV = 120.0

[node name="CultistNeophyteNoCape" parent="Body" index="3" instance=ExtResource( 15 )]
transform = Transform( -1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, 0, 0 )

[node name="BehaviorTree" type="Node" parent="." index="5"]
script = ExtResource( 6 )
bt_root = NodePath("BT_Selector")

[node name="BT_Selector" type="Node" parent="BehaviorTree" index="0"]
script = ExtResource( 8 )

[node name="BT_Sequence2" type="Node" parent="BehaviorTree/BT_Selector" index="0"]
script = ExtResource( 9 )

[node name="BT_Player_Sensor" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2" index="0"]
script = ExtResource( 11 )
sensor = NodePath("../../../../Body/DirectPlayerSight")

[node name="BT_Sequence" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2" index="1"]
script = ExtResource( 9 )

[node name="BT_Selector" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence" index="0"]
script = ExtResource( 8 )

[node name="BT_Approach_Random_Distance" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence/BT_Selector" index="0"]
script = ExtResource( 13 )

[node name="BT_Go_To_Target" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence/BT_Selector" index="1"]
script = ExtResource( 12 )

[node name="BT_Approach_Random_Distance2" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence/BT_Selector" index="2"]
script = ExtResource( 13 )

[node name="BT_Go_To_Target2" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence/BT_Selector" index="3"]
script = ExtResource( 12 )

[node name="BT_Look_At_Target" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence" index="1"]
script = ExtResource( 14 )

[node name="BT_Wait_Random" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence" index="2"]
script = ExtResource( 10 )

[node name="BT_Gun_Cooldown" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence" index="3"]
script = ExtResource( 2 )

[node name="BT_Shoot" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence" index="4"]
script = ExtResource( 3 )

[node name="BT_Selector2" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence" index="5"]
script = ExtResource( 8 )

[node name="BT_Look_At_Target2" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence" index="6"]
script = ExtResource( 14 )

[node name="BT_Wait_Random2" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence" index="7"]
script = ExtResource( 10 )

[node name="BT_Gun_Cooldown2" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence" index="8"]
script = ExtResource( 2 )

[node name="BT_Shoot2" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence2/BT_Sequence" index="9"]
script = ExtResource( 3 )

[node name="BT_Sequence" type="Node" parent="BehaviorTree/BT_Selector" index="1"]
script = ExtResource( 9 )

[node name="BT_Go_To_Target" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence" index="0"]
script = ExtResource( 12 )

[node name="BT_Wait_Random" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence" index="1"]
script = ExtResource( 10 )

[node name="BT_Select_Random_Target" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence" index="2"]
script = ExtResource( 7 )

[node name="BT_Go_To_Target2" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence" index="3"]
script = ExtResource( 12 )

[node name="BT_Wait_Random2" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence" index="4"]
script = ExtResource( 10 )

[node name="BT_Select_Random_Target2" type="Node" parent="BehaviorTree/BT_Selector/BT_Sequence" index="5"]
script = ExtResource( 7 )

[node name="BT_Sequence3" type="Node" parent="BehaviorTree/BT_Selector" index="2"]
script = ExtResource( 9 )

[node name="Hitbox" parent="." index="6" groups=["CHARACTER"]]
collision_layer = 8

[node name="CollisionShape" parent="Hitbox" index="0"]
visible = false

[node name="MainHandAttachement" parent="FPSCamera/MainCharOnlyArmsGameRig/rig_deform/Skeleton" index="2"]
transform = Transform( -0.0640363, -0.989469, -0.129808, 0.99632, -0.0708156, 0.0482957, -0.0569795, -0.126237, 0.990364, -9.50363, 18.0616, -0.60081 )

[node name="PlayerDetector" type="Area" parent="." index="16"]
collision_layer = 2
monitorable = false

[node name="CollisionShape" type="CollisionShape" parent="PlayerDetector" index="0"]
transform = Transform( 1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0.938325, 0 )
shape = SubResource( 4 )

[node name="AnimationPlayer" parent="." index="19"]
root_node = NodePath("../Body/CultistNeophyteNoCape")

[node name="AnimationTree" parent="." index="20"]
parameters/Equipped_state/current = 1

[connection signal="body_entered" from="PlayerDetector" to="Body/DirectPlayerSight" method="_on_PlayerDetector_body_entered"]
[connection signal="body_exited" from="PlayerDetector" to="Body/DirectPlayerSight" method="_on_PlayerDetector_body_exited"]
